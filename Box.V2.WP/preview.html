<html>
<head>
    <title>Preview File</title>
    <script type="text/javascript" src="jquery-1.10.1.min.js"></script>
    <script type="text/javascript" src="waypoints.min.js"></script>
    <!--<script type="text/javascript" src="waypoints-infinite.js"></script>-->
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=3 target-densitydpi=device-dpi">
</head>
<body>
    <div id="container" />
    
  <!--<div class="infinite-container">
  </div>
  <a href="javascript:addFakeData();" class="infinite-more-link">More</a>-->

    <script type="text/javascript">
        function addFakeData() {
            $(".infinite-container").append("<div class=\"preview-page\"><img src=\"test.png\"/></div>");
            $(".infinite-container").append("<div class=\"preview-page\"><img src=\"test.png\"/></div>");
            $(".infinite-container").append("<div class=\"preview-page\"><img src=\"test.png\"/></div>");
            $(".infinite-container").append("<div class=\"preview-page\"><img src=\"test.png\"/></div>");
            $(".infinite-container").append("<div class=\"preview-page\"><img src=\"test.png\"/></div>");
            $(".infinite-container").append("<div class=\"preview-page\"><img src=\"test.png\"/></div>");
        }

        function initContainers(id, totalPages) {

            for (var i = 1 ; i < totalPages; i++) {
                $("#container").append("<div id='" + id + "-" + i + "' class='preview-page'></div>");
                $("#" + id + "-" + i).data("pageNumber", i);
            }

            $('.preview-page').waypoint(function (event, direction) {
                window.external.notify($(event.target).data("pageNumber"));
            },
            { offset: '100%', triggerOnce: true });
            $.waypoints('refresh');
        }

        function addPreviewContainers(id, start, total) {
            pageStart = parseInt(start);
            totalPages = parseInt(total);
            for (var i = pageStart; i < totalPages; i++) {
                $("#container").append("<div id='" + id + "-" + i + "' />");
                $("#" + id + "-" + i).data("pageNumber", i);
            }
        }

        function addPreview(id, pageNum, fileExt) {
            $("#" + id + "-" + pageNum).append("<img src='" + id + "-" + pageNum + fileExt + "'/>");
            //$.waypoints('refresh');
        }

        //var anchor_offset = $('a[href="#load"]').offset().top;
        //$(window).on('scroll', function () {
        //    if ($(window).scrollTop() > anchor_offset)
        //       window.external.notify("")
        //});

        function addPreviewNoParam() {
            addPreviewContainers("8356335198", 0, 10);
            addPreview("8356335198", "4", ".png");
        }

        $(document).ready(function () {
            //addFakeData();
            //$('.infinite-container').waypoint('infinite');
            //window.external.notify('ready');
        });

    </script>
</body>
</html>
